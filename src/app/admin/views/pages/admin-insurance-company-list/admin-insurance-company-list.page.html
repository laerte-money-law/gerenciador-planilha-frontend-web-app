<div class="card">
    <div class="card-header border-0 pt-6">
        <div class="card-title flex-grow-1">
            <div class="d-flex align-items-center position-relative my-1 w-100">
                <i class="fa-solid fa-magnifying-glass fs-3 position-absolute ms-5">
                    <span class="path1"></span><span class="path2"> </span>
                </i>
                <input
                    type="text"
                    class="form-control form-control-solid ps-13"
                    placeholder="Pesquise pelo nome, CNPJ ou registro"
                    autocomplete="off"
                />
            </div>
        </div>
    </div>

    <div class="card-body py-4">
        <div id="kt_table_users_wrapper" class="dt-container dt-bootstrap5 dt-empty-footer">
            <div id="" class="table-responsive">
                <table class="table table-striped align-middle table-row-dashed fs-7 gy-5 dataTable" id="kt_table_users" style="width: 100%">
                    <thead>
                        <tr class="text-start text-muted fw-bold fs-7 text-uppercase gs-0" role="row">
                            <th class="min-w-125px">Seguradora</th>
                            <th class="min-w-125px">Código</th>
                            <th class="min-w-125px">Contato</th>
                            <th class="min-w-125px">Status</th>
                            <th class="min-w-125px">Data/hora do cadastro</th>
                            <th class="text-center min-w-100px">Ações</th>
                        </tr>
                    </thead>
                    <tbody class="text-gray-600 fw-semibold">
                        <tr *ngFor="let insuranceCompany of allRecords">
                            <td><a class="text-gray-600 text-hover-primary mb-1">{{insuranceCompany.insuranceCompanyName}}</a></td>
                            <td>{{insuranceCompany.registrationCode}}</td>
                            <td>
                                <div
                                    class=""
                                    *ngIf="insuranceCompany.contactName || insuranceCompany.contactPhone || insuranceCompany.contactEmail;else clientEmpty"
                                >
                                    <span *ngIf="insuranceCompany.contactName">
                                        {{insuranceCompany.contactName}}
                                        <br />
                                    </span>
                                    <span *ngIf="insuranceCompany.contactPhone" class="text-nowrap">
                                        {{formatPhone(insuranceCompany.contactPhone)}}
                                        <a href="tel:{{insuranceCompany.contactPhone}}" class="ms-3" target="_blank">
                                            <i class="fa-solid fa-phone text-primary"></i>
                                        </a>
                                        <a
                                            href="https://wa.me/{{insuranceCompany.contactPhone.removeNonDigits()}}"
                                            class="ms-3"
                                            target="_blank"
                                        >
                                            <i class="fa-brands fa-whatsapp fa-lg text-primary"></i>
                                        </a>
                                        <br />
                                    </span>

                                    <span *ngIf="insuranceCompany.contactEmail" class="text-nowrap">
                                        {{insuranceCompany.contactEmail}}
                                        <a
                                            href="https://mail.google.com/mail/?view=cm&to={{insuranceCompany.contactEmail}}&su=ASSUNTO&body=CORPO DO E-MAIL"
                                            class="ms-3"
                                            target="_blank"
                                        >
                                            <i class="fa-solid fa-envelope text-primary"></i>
                                        </a>
                                    </span>
                                </div>
                                <ng-template #clientEmpty> <app-label-not-informed></app-label-not-informed> </ng-template>
                            </td>
                            <td>
                                <app-badge-activation-status [status]="insuranceCompany.status"></app-badge-activation-status>
                            </td>
                            <td>{{formatDateTime(insuranceCompany.createdAt)}}</td>
                            <td class="text-end">
                                <span ngbDropdown container="body">
                                    <a
                                        role="button"
                                        class="btn btn-light btn-active-light-primary btn-flex btn-center btn-sm text-gray-600"
                                        ngbDropdownToggle
                                    >
                                        Ações
                                        <i class="fa-solid fa-angle-down fs-6 ms-2 text-gray-600"></i>
                                    </a>
                                    <div
                                        class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-semibold fs-7 w-125px py-4"
                                        ngbDropdownMenu
                                    >
                                        <div class="menu-item px-3">
                                            <a class="menu-link px-3" role="button" (click)="onEdit(insuranceCompany.code)"> Editar </a>
                                        </div>
                                        <div class="menu-item px-3">
                                            <a role="button" class="menu-link px-3" (click)="onSwitchStatus(insuranceCompany.code)">
                                                Ativar/Inativar
                                            </a>
                                        </div>
                                    </div>
                                </span>
                            </td>
                        </tr>
                    </tbody>
                    <tfoot></tfoot>
                </table>
            </div>
        </div>
    </div>
</div>
